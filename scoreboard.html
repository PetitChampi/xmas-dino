<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Score boards</title>
  <link rel="stylesheet" href="css/game.css">
</head>
<body class="score-body">
  <table class="scoreboard" data-scoreboard>
    <thead>
      <tr>
        <th>nickname</th>
        <th>character</th>
        <th>score</th>
        <th>date</th>
      </tr>
    </thead>
    <tbody data-scoreboard-body>
      <tr>
        <td colspan="4" style="color: gray; text-align:center;">Scoreboard will work with PHP</td>
      </tr>
    </tbody>
  </table>
  <br>
  <a href="game.html">Back to game</a>

  <script>
    const scoreboardBody = document.querySelector("[data-scoreboard-body]")

    // call ajax
    let ajax = new XMLHttpRequest()
    let method = "GET"
    let url = "php/scoreboard.php"
    let asynchronous = true

    ajax.open(method, url, asynchronous)
    // sending ajax request
    ajax.send()

    // receive response from php file
    ajax.onreadystatechange = function() {
      if (this.readyState == 4 && this.status == 200) {
        // converting JSON back to array
        let data = JSON.parse(this.responseText)

        // html value for <tbody>
        let html = ""
        // looping through the data
        for (i = 0; i < data.length; i++) {
          let nickname = data[i].nickname
          let character = data[i].avatar
          let score = data[i].score
          let date = data[i].date

          // appending to HTML
          html += "<tr>"
          html += `<td>${nickname}</td>`
          html += `<td><img style="object-fit:contain; height:30px; width:100%; text-align:center;" src="imgs/${character}/dino-stationary.png""></td>`
          html += `<td>${score}</td>`
          html += `<td>${date}</td>`
          html += "</tr>"
        }

        // replacing the contents of <tbody>
        scoreboardBody.innerHTML = html
      }
    }

  </script>
</body>
</html>